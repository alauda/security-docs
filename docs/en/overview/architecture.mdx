---
weight: 15
---


## Architecture

---

Alauda Container Security (ACS) for Kubernetes 4.7

### System Architecture

**Abstract**

This document provides a concise overview of the Alauda Container Security (ACS) architecture for Kubernetes environments.

---

ACS adopts a distributed, container-based architecture for scalable, low-impact security on Alauda Container Platform or Kubernetes clusters.

**Key Components**

- **Central Services**: Deployed on a single cluster, providing management, API, and UI (ACS Portal). Includes Central, Central DB (PostgreSQL 13), and vulnerability scanners (StackRox Scanner and Scanner V4).
- **Secured Cluster Services**: Deployed on each protected cluster. Includes Sensor (cluster monitoring and policy enforcement), Admission Controller (policy admission), Collector (runtime and network data collection), and optional scanners.

**Scanner Overview**

- **StackRox Scanner**: Default scanner (deprecated from 4.6), required for node and platform scanning.
- **Scanner V4**: Recommended from 4.4, supports language and OS-specific image scanning. Consists of Indexer, Matcher, and DB.

**Vulnerability Sources**

- StackRox Scanner: Red Hat OVAL, Alpine, Amazon Linux, Debian, Ubuntu, NVD, and custom/manual sources.
- Scanner V4: Red Hat VEX, Red Hat CVE Map, OSV, NVD, and additional OS sources.

**Deployment Notes**

- Operator installs a lightweight Scanner on each cluster for integrated registry scanning.
- Helm installs require `scanner.disable=false` to enable the lightweight Scanner.
- If Central and secured cluster services share a namespace, only Central deploys Scanner V4 components.

**External Integrations**

- Third-party systems (CI/CD, SIEM, logging, email)
- roxctl CLI
- Image registries (auto/manual integration)
- definitions.stackrox.io (vulnerability feeds)
- collector-modules.stackrox.io (kernel modules)

### Component Interactions

#### ACS with Scanner V4

| Component         | Direction | Component             | Description                                      |
|-------------------|-----------|-----------------------|--------------------------------------------------|
| Central           | ⮂         | Scanner V4 Indexer    | Image indexing and report generation             |
| Central           | ⮂         | Scanner V4 Matcher    | Vulnerability matching and reporting             |
| Sensor            | ⮂         | Scanner V4 Indexer    | Delegated image indexing                         |
| Scanner V4 Indexer| →         | Image Registries      | Pulls image metadata and layers                  |
| Scanner V4 Matcher| →         | Scanner V4 Indexer    | Fetches index reports                            |
| Scanner V4 Indexer| →         | Scanner V4 DB         | Stores indexing results                          |
| Scanner V4 Matcher| →         | Scanner V4 DB         | Stores and updates vulnerability data            |
| Sensor            | ⮂         | Central               | Configuration and event sync                     |
| Collector         | ⮂         | Sensor                | Sends runtime/network data                       |
| Admission controller | ⮂      | Sensor                | Policy enforcement and scan requests             |
| Admission controller | →      | Central               | Direct communication if Sensor unavailable       |

#### ACS with StackRox Scanner

| Component         | Direction | Interacts with            | Description                                      |
|-------------------|-----------|--------------------------|--------------------------------------------------|
| Central           | ⮂         | Scanner                  | Image scan requests and CVE DB updates            |
| Central           | →         | definitions.stackrox.io   | Vulnerability data aggregation                   |
| Central           | →         | collector-modules.stackrox.io | Kernel module downloads                     |
| Central           | →         | Image registries          | Image metadata queries                           |
| Scanner           | →         | Image registries          | Image pulls for scanning                         |
| Sensor            | ⮂         | Central                   | Configuration and event sync                     |
| Sensor            | ⮂         | Scanner                   | Data requests and registry access                |
| Collector         | ⮂         | Sensor                    | Runtime/network data                             |
| Admission controller | ⮂      | Sensor                    | Policy enforcement and scan requests             |
| Admission controller | →      | Central                   | Direct communication if Sensor unavailable       |

### Default Ports and Protocols

| Connection                        | Type         | Port  | Notes                                           |
|------------------------------------|--------------|-------|-------------------------------------------------|
| Central ↔ Scanner V4 Indexer       | gRPC         | 8443  |                                                 |
| Central ↔ Sensor                   | TCP/gRPC     | 443   | Bidirectional, Sensor initiates                  |
| Central ↔ CLI                      | gRPC/HTTPS   | 443   | See `roxctl` for options                        |
| Central ↔ Vulnerability feeds      | HTTPS        | 443   | definitions.stackrox.io                          |
| Collector → Sensor                 | gRPC         | 443   |                                                 |
| Collector (Compliance) → Sensor    | gRPC         | 8444  | If node scanning enabled                         |
| Scanner → Scanner-DB               | TCP          | 5432  |                                                 |
| Scanner V4 Indexer → Central       | HTTPS        | 443   |                                                 |
| Scanner V4 Indexer/Matcher → DB    | TCP          | 5432  |                                                 |
| Sensor ↔ Admission Controller      | gRPC         | 443   | Bidirectional                                   |
