---
weight: 30
sourceSHA: e8432e547224b70e063f9a3be7a3ebf6d7c5ad59fe0c5f6afe97eb3afb41073c
---

# 使用 roxctl CLI 进行镜像扫描

您可以使用 `roxctl` CLI 扫描存储在镜像注册表中的镜像，包括集群本地注册表，例如 Alauda 容器平台集成的镜像注册表。

通过在委托扫描配置中指定适当的集群或通过下面描述的集群参数，您可以使用远程集群扫描集群本地注册表中的镜像。

:::info
镜像扫描需要适当的权限和对注册表及 Central 的网络访问。
:::

## 在远程集群中扫描镜像

运行以下命令以在远程集群中扫描指定的镜像：

```bash
roxctl image scan \
  --image=<image_registry>/<image_name> \
  --cluster=<cluster_detail> \
  [flags]
```

- 对于 `<image_registry>`，指定镜像所在的注册表，例如 `image-registry.alauda-image-registry.svc:5000/`。
- 对于 `<image_name>`，指定您要扫描的镜像名称，例如 `default/image-stream:latest`。
- 对于 `<cluster_detail>`，指定远程集群的名称或 ID，例如 `remote`。
- `[flags]` 是可选参数，用于修改命令行为。

### 示例输出

```json
{
  "Id": "sha256:3f439d7d71adb0a0c8e05257c091236ab00c6343bc44388d091450ff58664bf9",
  "name": {
    "registry": "image-registry.alauda-image-registry.svc:5000",
    "remote": "default/image-stream",
    "tag": "latest",
    "fullName": "image-registry.alauda-image-registry.svc:5000/default/image-stream:latest"
  }
  // ...
}
```

- `Id`: 镜像的唯一标识符，作为完整性和真实性的指纹。
- `name.registry`: 镜像注册表位置。
- `name.remote`: 镜像的远程路径。
- `name.tag`: 镜像的版本或标签。
- `name.fullName`: 镜像的完整名称（注册表、路径、标签）。

## roxctl image scan 命令选项

#### 选项描述

| 选项                                 | 描述                                                                                                      |
| ------------------------------------ | --------------------------------------------------------------------------------------------------------- |
| `--cluster string`                   | 将镜像扫描委托给特定集群。                                                                                |
| `--compact-output`                   | 以紧凑格式打印 JSON 输出。默认值：`false`。                                                              |
| `-f, --force`                        | 忽略 Central 的缓存进行扫描，并强制从 Scanner 重新拉取。默认值：`false`。                               |
| `--headers strings`                  | 以表格格式打印标题。默认值：`COMPONENT`、`VERSION`、`CVE`、`SEVERITY`、`LINK`。                       |
| `--headers-as-comments`              | 以注释形式打印标题到 CSV 表格输出。默认值：`false`。                                                    |
| `-h, --help`                         | 查看 `roxctl image scan` 命令的帮助文本。                                                                |
| `-i, --image string`                 | 指定您要扫描的镜像名称和引用。                                                                            |
| `-a, --include-snoozed`              | 返回已暂停和未暂停的 CVE。默认值：`false`。                                                              |
| `--merge-output`                     | 在表格输出中合并重复单元格。默认值：`true`。                                                             |
| `--no-header`                        | 不打印表格格式的标题。默认值：`false`。                                                                  |
| `-o, --output string`                | 指定输出格式：`table`、`CSV`、`JSON` 或 `SARIF`。                                                       |
| `-r, --retries int`                  | 设置在中止错误之前的重试次数。默认值：`3`。                                                              |
| `-d, --retry-delay int`              | 设置重试之间等待的时间（以秒为单位）。默认值：`3`。                                                      |
| `--row-jsonpath-expressions string`  | 使用 JSON 路径表达式从 JSON 对象创建行。有关详细信息，请参见 `roxctl image scan --help`。               |
