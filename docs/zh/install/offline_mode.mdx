---
weight: 15
sourceSHA: 2fff6402bc4d0c1ef60fbec4a30148489efdea04074acd20fca861c6a00c8e7a
---

# 在离线模式下使用 Alauda 容器安全

Alauda 容器安全可以通过启用离线模式在没有互联网访问的环境中部署。在离线模式下，所有组件在不连接外部地址或主机的情况下运行。

## 启用离线模式

- 在通过 YAML 安装时，将 `env.offlineMode` 设置为 `true`。

## 更新漏洞定义

扫描器维护一个本地漏洞数据库。在在线模式下，Central 从互联网获取最新的漏洞数据，扫描器与 Central 同步。在离线模式下，您必须通过将定义文件上传到 Central 手动更新漏洞数据，扫描器随后会从中检索。

- 默认情况下，扫描器每 5 分钟检查一次 Central 的新数据。
- 离线数据源大约每 3 小时更新一次。

### 下载定义文件

- 使用以下命令下载定义文件：
  ```bash
  roxctl scanner download-db --scanner-db-file scanner-vuln-updates.zip
  ```
- 或者，从以下链接下载：\
  [https://install.stackrox.io/scanner/scanner-vuln-updates.zip](https://install.stackrox.io/scanner/scanner-vuln-updates.zip)

### 将定义文件上传到 Central

您可以使用 API 令牌或管理员密码将漏洞定义数据库上传到 Central。

#### 使用 API 令牌

- 前提条件：
  - 拥有管理员角色的 API 令牌
  - 安装了 `roxctl` CLI

- 操作步骤：
  ```bash
  export ROX_API_TOKEN=<api_token>
  export ROX_CENTRAL_ADDRESS=<address>:<port_number>
  roxctl scanner upload-db \
    -e "$ROX_CENTRAL_ADDRESS" \
    --scanner-db-file=<compressed_scanner_definitions.zip>
  ```
